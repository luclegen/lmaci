<app-header></app-header>
<section>
  <div class="center-container top-container">
    <h1>
      {{ product.name }}
      <span *ngIf="product.star.countRate" class="star-container">
        <span class="star">
          <svg *ngFor="let s of starCount" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="star" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" class="svg-inline--fa fa-star fa-w-18 fa-3x"><path d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z" class=""></path></svg>
        </span>
        <span *ngIf="starHalf" class="star-half">  
          <svg aria-hidden="true" focusable="false" data-prefix="fad" data-icon="star-half" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" class="svg-inline--fa fa-star-half fa-w-18 fa-3x"><g class="fa-group"><path fill="silver" d="M545.3 226L439.6 329l25 145.5c4.5 26.1-23 46-46.4 33.7l-130.7-68.6V0a31.62 31.62 0 0 1 28.7 17.8l65.3 132.4 146.1 21.2c26.2 3.8 36.7 36.1 17.7 54.6z" class="fa-secondary"></path><path d="M110.4 474.5l25-145.5L29.7 226c-19-18.5-8.5-50.8 17.7-54.6l146.1-21.2 65.3-132.4A31.62 31.62 0 0 1 287.5 0v439.6l-130.7 68.6c-23.4 12.3-50.9-7.6-46.4-33.7z" class="fa-primary"></path></g></svg>
        </span>
        <span class="none-star">
          <svg *ngFor="let n of noneStarCount" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="star" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" class="svg-inline--fa fa-star fa-w-18 fa-3x"><path d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z" class=""></path></svg>
        </span>
      </span>
    </h1>
    <hr>
  </div>
</section>
<section class="top-content">
  <div class="left-container top-center">
    <div class="carousel-container">
      <button id="close-btn" (click)="closeGallery()">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="times-circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-times-circle fa-w-16 fa-3x"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z" class=""></path></svg>
      </button>
      <div class="carousel-slide" (click)="showGallery()" (mouseenter)="showArrow()" (mouseleave)="hideArrow()" (transitionend)="moved()">
        <img *ngFor="let i of imgs" [src]="i" [alt]="'Image ' + (imgs.indexOf(i) + 1)">
        <img *ngIf="!imgs.length" src="assets/img/carousel/A.png" alt="A">
        <img *ngIf="!imgs.length" src="assets/img/carousel/B.png" alt="B">
        <img *ngIf="!imgs.length" src="assets/img/carousel/C.png" alt="C">
      </div>
    
      <button id="prev-btn" (mouseenter)="showArrow()" (mouseleave)="hideArrow()" (click)="prev()">
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          viewBox="0 0 492 492" style="enable-background:new 0 0 492 492;" xml:space="preserve">
          <g>
            <g>
              <path d="M198.608,246.104L382.664,62.04c5.068-5.056,7.856-11.816,7.856-19.024c0-7.212-2.788-13.968-7.856-19.032l-16.128-16.12
                C361.476,2.792,354.712,0,347.504,0s-13.964,2.792-19.028,7.864L109.328,227.008c-5.084,5.08-7.868,11.868-7.848,19.084
                c-0.02,7.248,2.76,14.028,7.848,19.112l218.944,218.932c5.064,5.072,11.82,7.864,19.032,7.864c7.208,0,13.964-2.792,19.032-7.864
                l16.124-16.12c10.492-10.492,10.492-27.572,0-38.06L198.608,246.104z"/>
            </g>
          </g>
        </svg>
      </button>
      <button id="next-btn" (mouseenter)="showArrow()" (mouseleave)="hideArrow()" (click)="next()">
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          viewBox="0 0 492.004 492.004" style="enable-background:new 0 0 492.004 492.004;" xml:space="preserve">
          <g>
            <g>
              <path d="M382.678,226.804L163.73,7.86C158.666,2.792,151.906,0,144.698,0s-13.968,2.792-19.032,7.86l-16.124,16.12
                c-10.492,10.504-10.492,27.576,0,38.064L293.398,245.9l-184.06,184.06c-5.064,5.068-7.86,11.824-7.86,19.028
                c0,7.212,2.796,13.968,7.86,19.04l16.124,16.116c5.068,5.068,11.824,7.86,19.032,7.86s13.968-2.792,19.032-7.86L382.678,265
                c5.076-5.084,7.864-11.872,7.848-19.088C390.542,238.668,387.754,231.884,382.678,226.804z"/>
            </g>
          </g>
        </svg>
      </button>
    </div>
    <div class="gallery-carousel-nav" (click)="selectImg($event)">
      <span class="gallery-frame">
        <img src="assets/img/carousel/Transparent.png" alt="Frame">
      </span>
      <img *ngFor="let i of imgs" [src]="i" [alt]="'Image ' + (imgs.indexOf(i) + 1)">
        <img *ngIf="!imgs.length" src="assets/img/carousel/A.png" alt="A">
        <img *ngIf="!imgs.length" src="assets/img/carousel/B.png" alt="B">
        <img *ngIf="!imgs.length" src="assets/img/carousel/C.png" alt="C">
    </div>
  </div>
  <div class="right-container">
    <form class="left">
      <label class="attr"><strong>Price:</strong><label class="price"> {{ priceFormated }}</label></label>
      <label class="attr">
        <strong>Color:</strong> {{ preview.color.name }}
      </label>
      <div class="left">
        <div *ngFor="let c of product.colors" class="center vertical color-radio-container">
          <input #color="ngModel" [(ngModel)]="order.color.name" [value]="c.name" (ngModelChange)="onCheckColor(c)" (mouseenter)="previewColor(c)" (mouseleave)="resetColor()" type="radio" name="color">
          <span class="checkmark" [ngStyle]="{ 'background': c.value }"></span> 
        </div>
      </div>
      <div class="property-container" *ngFor="let p of product.properties">
        <label class="attr">
          <strong>{{ p.name }}:</strong> {{ preview.properties[product.properties.indexOf(p)].option.value }}
        </label>
        <div class="left">
          <div *ngFor="let o of p.options" class="property-radio-container">
            <input #propertyValue="ngModel" [(ngModel)]="order.properties[product.properties.indexOf(p)].option.value" [value]="o.value" (ngModelChange)="onCheckOption(product.properties.indexOf(p), o)" (mouseenter)="previewOption(product.properties.indexOf(p), o)" (mouseleave)="resetOption()" type="radio" [name]="productService.toHTMLName(p.name)">
            <span class="option-checkmark">{{ o.value }}</span>
          </div>
        </div>
      </div>
    </form>
    <p class="jump-to">
      <strong *ngIf="product.technicalDetails.length">Jump to: </strong>
      <a *ngIf="product.technicalDetails.length" [href]="type + '/' + id + '#technical-details'">Technical Details | </a>
      <a [href]="type + '/' + id + '#reviews'">Reviews</a>
    </p>
  </div>
</section>
<section *ngIf="userDetails && (userDetails.role == 'root' || userDetails.role == 'admin')">
  <div class="center-container">
    <details open="open">
      <summary>
        <strong>Slider Image Editor</strong>
        <button *ngIf="isSaveImgs()" class="btn square-btn yellow-btn" title="Save" type="button" (click)="saveSlider()">
          <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="save" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="svg-inline--fa fa-save fa-w-14 fa-3x"><path d="M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z" class=""></path></svg>
        </button>
        <button *ngIf="isSaveImgs()" class="btn circle-btn red-btn" title="Cancel" type="button" (click)="cancelSaveSlider()">
          <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="times-circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-times-circle fa-w-16 fa-3x"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z" class=""></path></svg>
        </button>
      </summary>
      <div class="grid-container" cdkDropListGroup>
        <div cdkDropList [cdkDropListEnterPredicate]="dropListEnterPredicate" (cdkDropListDropped)="dropListDropped()"></div>
        <div cdkDropList *ngFor="let i of imgs" [cdkDropListEnterPredicate]="dropListEnterPredicate" (cdkDropListDropped)="dropListDropped()">
          <div cdkDrag class="grid-box" (cdkDragMoved)="dragMoved($event);">
            <img [src]="i" [alt]="'Image ' + imgs.indexOf(i)">
            <button class="func-btn circle-btn red-btn" title="Delete" type="button" (click)="delete(imgs.indexOf(i))">
              <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="times-circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-times-circle fa-w-16 fa-3x"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z" class=""></path></svg>
            </button>
          </div>
        </div>
      </div>
    </details>
  </div>
</section>
<section *ngIf="userDetails && (userDetails.role == 'root' || userDetails.role == 'admin')">
  <div class="left-container image-cropper-container">
    <span class="input-span inline-span">
      <label for="img">Choose an image file</label>
      <input #newImg="ngModel" [(ngModel)]="img" id="img" type="file" name="img" (change)="fileChangeEvent($event)" accept="image/*" required>
    </span>
    <image-cropper *ngIf="imageChangedEvent"
      [imageChangedEvent]="imageChangedEvent" 
      [maintainAspectRatio]="true" 
      [aspectRatio]="4 / 3"
      [resizeToWidth]="2048"
      [cropperMinWidth]="128"
      format="jpeg"
      (imageCropped)="imageCropped($event)" 
      [onlyScaleDown]="true">
    </image-cropper>
  </div>
  <div class="right-container cropped-image-container">
    <button type="button" class="btn circle-btn yellow-btn" title="Add" (click)="add()" [disabled]="!croppedImage">
      <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus-circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-plus-circle fa-w-16 fa-3x"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z" class=""></path></svg>
    </button>
    <button *ngIf="croppedImage" type="button" class="btn circle-btn red-btn" title="Cancel" (click)="cancel()">
      <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="times-circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-times-circle fa-w-16 fa-3x"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z" class=""></path></svg>
    </button>
    <img [src]="croppedImage" />
  </div>
</section>
<section *ngIf="userDetails && (userDetails.role == 'root' || userDetails.role == 'admin')">
  <div class="center-container">
    <details open="open">
      <summary>
        <strong>Post Editor</strong>
        <button *ngIf="isSavePost()" class="btn square-btn yellow-btn" title="Save" type="button" (click)="savePost()">
          <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="save" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="svg-inline--fa fa-save fa-w-14 fa-3x"><path d="M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z" class=""></path></svg>
        </button>
        <button *ngIf="isSavePost()" class="btn circle-btn red-btn" title="Cancel" type="button" (click)="cancelSavePost()">
          <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="times-circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-times-circle fa-w-16 fa-3x"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z" class=""></path></svg>
        </button>
      </summary>
      <ejs-richtexteditor #content="ngModel" [(ngModel)]="post.content" [toolbarSettings]='tools' [insertImageSettings]='imageSettings'>
      </ejs-richtexteditor>
    </details>
  </div>
</section>
<section>
  <div *ngIf="product.post" class="center-container" [innerHTML]="product.post.content"></div>
</section>
<section *ngIf="product.technicalDetails.length">
  <div class="center-container">
    <table class="ls-table property-table">
      <thead>
        <tr>
          <th id="technical-details" colspan="2">Technical Details</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let t of product.technicalDetails">
          <td>{{ t.name }} </td>
          <td>{{ t.value }} </td>
        </tr>
      </tbody>
    </table>
  </div>
</section>
<section>
  <div class="center-container">
    <h1 id="reviews">Reviews</h1>
    <form #reviewForm="ngForm" class="left">
      <span class="rating">
        <span *ngFor="let s of [ 1, 2, 3, 4, 5 ]" class="star" (click)="tickStar(s)" (mouseenter)="previewStar(s)" (mouseleave)="resetStar()">
          <input #star="ngModel" [(ngModel)]="review.star" type="radio" class="star-in" name="rating" [value]="s" />
          <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="star" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" class="svg-inline--fa fa-star fa-w-18 fa-3x"><path d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z" class=""></path></svg>
        </span>
        <label id="rating-msg"></label>
      </span>
      <textarea name="content" id="" cols="30" rows="5"></textarea>
      <span class="func-bar">
        <span>
          <label class="img-in" for="review-img" (mouseenter)="hoverReviewCamera()">
            ⬛
          </label>
          <button class="btn quare-btn blue-btn" id="review-camera" for="review-img" type="submit">
            <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="camera" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-camera fa-w-16 fa-3x"><path d="M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z" class=""></path></svg>
          </button>
          <input #newImg="ngModel" [(ngModel)]="review.img" id="review-img" type="file" accept="image/*" name="img" required>
        </span>
        <button class="btn right-btn quare-btn blue-btn" type="submit">
          <svg class="sqpo3gyd" height="20px" width="20px" viewBox="0 0 24 24"><path d="M16.6915026,12.4744748 L3.50612381,13.2599618 C3.19218622,13.2599618 3.03521743,13.4170592 3.03521743,13.5741566 L1.15159189,20.0151496 C0.8376543,20.8006365 0.99,21.89 1.77946707,22.52 C2.41,22.99 3.50612381,23.1 4.13399899,22.8429026 L21.714504,14.0454487 C22.6563168,13.5741566 23.1272231,12.6315722 22.9702544,11.6889879 C22.8132856,11.0605983 22.3423792,10.4322088 21.714504,10.118014 L4.13399899,1.16346272 C3.34915502,0.9 2.40734225,1.00636533 1.77946707,1.4776575 C0.994623095,2.10604706 0.8376543,3.0486314 1.15159189,3.99121575 L3.03521743,10.4322088 C3.03521743,10.5893061 3.34915502,10.7464035 3.50612381,10.7464035 L16.6915026,11.5318905 C16.6915026,11.5318905 17.1624089,11.5318905 17.1624089,12.0031827 C17.1624089,12.4744748 16.6915026,12.4744748 16.6915026,12.4744748 Z" fill-rule="evenodd" stroke="none"></path></svg>
        </button>
      </span>
    </form>
  </div>
</section>